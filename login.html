<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login | ImageBIT AI</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Inter',sans-serif}
body{background:#f9fafb;color:#111827;display:flex;justify-content:center;align-items:center;height:100vh}
.container{background:white;padding:40px;border-radius:25px;box-shadow:0 20px 50px rgba(0,0,0,0.1);width:90%;max-width:400px;text-align:center}
.container h1{font-size:32px;font-weight:800;margin-bottom:20px;color:#111827}
.container input{width:100%;padding:12px 18px;margin:10px 0;border:2px solid #e5e7eb;border-radius:25px;font-size:16px;outline:none;transition:0.3s}
.container input:focus{border-color:#ff2e88}
.container button{width:100%;padding:12px 0;margin-top:10px;border:none;border-radius:25px;font-weight:600;font-size:16px;color:white;background:#ff2e88;cursor:pointer;box-shadow:0 10px 25px rgba(255,46,136,0.3);transition:0.3s}
.container button:hover{transform:translateY(-2px)}
.google-btn{background:#4285F4;margin-top:10px}
.create-btn{background:#6b7280;margin-top:10px}
</style>
</head>
<body>

<div class="container">
  <h1>Login to ImageBIT AI</h1>
  <input type="email" id="email" placeholder="Email">
  <input type="password" id="password" placeholder="Password">
  <button id="login-btn">Login</button>
  <button class="google-btn" id="google-btn">Sign in with Google</button>
  <button class="create-btn" id="create-btn">Create Account</button>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, GoogleAuthProvider, signInWithPopup, sendEmailVerification } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

// ðŸ”¥ REPLACE WITH YOUR FIREBASE CONFIG ðŸ”¥
const firebaseConfig = {
  apiKey: "AIzaSyDr6R3e_oGeLb02blsH2l9cDJZZBwVegOk",
  authDomain: "imagebit-8fe75.firebaseapp.com",
  projectId: "imagebit-8fe75",
  storageBucket: "imagebit-8fe75.appspot.com",
  messagingSenderId: "326104098599",
  appId: "1:326104098599:web:f2d3447a6211f2104e6b02",
  measurementId: "G-4L17LE3VH8"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

const emailInput = document.getElementById('email');
const passwordInput = document.getElementById('password');
const loginBtn = document.getElementById('login-btn');
const googleBtn = document.getElementById('google-btn');
const createBtn = document.getElementById('create-btn');

// Email/password login
loginBtn.addEventListener('click', ()=>{
  const email = emailInput.value;
  const password = passwordInput.value;
  if(!email || !password){alert('Enter email & password'); return;}
  signInWithEmailAndPassword(auth,email,password)
    .then((cred)=>{
      if(!cred.user.emailVerified){
        alert("Please verify your email first. WARN: Check SPAM folder if you don't see it.");
        return;
      }
      window.location.href="dashboard.html";
    })
    .catch(err=>alert(err.message));
});

// Google login
googleBtn.addEventListener('click', ()=>{
  const provider = new GoogleAuthProvider();
  signInWithPopup(auth,provider)
    .then(()=>{window.location.href="dashboard.html"})
    .catch(err=>alert(err.message));
});

// Create account with email/password + send verification
createBtn.addEventListener('click', ()=>{
  const email = emailInput.value;
  const password = passwordInput.value;
  if(!email || !password){alert('Enter email & password'); return;}
  createUserWithEmailAndPassword(auth,email,password)
    .then(async (cred)=>{
      // Send verification email
      await sendEmailVerification(cred.user);
      alert("Verification email sent! WARN: Check SPAM folder if not received.");
      // Create Firestore record
      await setDoc(doc(db,"users",cred.user.uid),{
        credits: 5,
        plan: "Free"
      });
    })
    .catch(err=>alert(err.message));
});
</script>
</body>
</html>